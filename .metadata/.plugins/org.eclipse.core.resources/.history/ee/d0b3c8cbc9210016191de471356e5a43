<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
<link rel='stylesheet' href='webjars/bootstrap/3.0.0/css/bootstrap.css'>
<script src="resources/js/validator.js"></script>
<link rel='stylesheet' href='resources/sweetalert-master/dist/sweetalert.css'>
<script>
$(window).load(function()
{
  
   $('.hold-widgets').validator().on('submit', function (e) {
  if (e.isDefaultPrevented()) {
    // handle the invalid form...
     changePassword();
  } else {
    // everything looks good!
    alert("look good");
  }
}) 
});


//call to change password
var changePassword = function()
{
  var http = new XMLHttpRequest();
  var newPassword = document.getElementById("inputPassword").value;
  var oldPassword = document.getElementById("oldpassword").value;
	var url = "http://localhost:8080/AutomaticAccessSystem/submitpassword?oldpass="+oldPassword+"&newpass="+newPassword;
	http.open("GET", url, true);
	
	http.onreadystatechange = function() {
	    var status = http.status;
	    if(http.readyState == 4 && http.status == 200) {
	       
	        var obj = JSON.parse(http.responseText);
	        var failedState = 0;  
	        if(obj.code == 0)
	        {
	           swal("Oopps"," The password does not exist", "error");   
	        }
	        else
	        {
	          swal("Success"," You have successfully changed your password", "success");   
	        }
	        
	    }
	    else
	    {
	    	response = "";
	    }
   }
   http.send(null);
}
</script>



</head>





<div class="form-div">

     <div>
     <p id="register-message">Fill in the details to register student</p>
     <hr id="horizontal-rule">
     </div>
     
 <div class="change-password-container">
<form autocomplete="off" class="hold-widgets" role="form" data-toggle="validator">

<div class="form-widgets">
<div class="form-group">
<input type="text" placeholder="First name" id="firstname" class="form-control" required="required"/>
</div>

<div class="form-group">
<input type="text" placeholder="Second name" id="secondname" class="form-control" required="required"/>
</div>

<div class="form-group">
<input type="number" placeholder="Student number" id="studentnumber" class="form-control" required="required"/>
</div>

<div class="form-group">
<input type="text" placeholder="Course" id="course" class="form-control" required="required"/>
</div>

<div class="form-group">
<input type="number" placeholder="Course duration" id="courseduration" class="form-control" required="required"/>
</div>

<div class="form-group">
<input type="number" placeholder="Tuition" id="tuition" class="form-control" required="required"/>
</div>
</div>
<div> <button type="submit" class="btn btn-primary">Submit</button></div>
</div>
</form>>
	    
	 </div>